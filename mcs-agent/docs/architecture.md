# 아키텍처

## 시스템 구성

MCS는 다음과 같은 구성 요소로 이루어져 있습니다:

```
+------------------+     +----------------------+     +-------------------------+
|                  |     |                      |     |                         |
|     사용자       +---->+  ElizaOS Agent       +---->+  정적 분석 서버          |
|   인터페이스     |     |  (Node.js 백엔드)     |     |  (Python/FastAPI)       |
+------------------+     +----------------------+     +-------------------------+
                                   |  ^                           |
                                   v  |                           v
                         +----------------------+     +-------------------------+
                         |                      |     |                         |
                         |  AES 암호화 모듈     +<----+  AI 주석 생성 모듈       |
                         |                      |     |                         |
                         +----------------------+     +-------------------------+
                                   |
                                   v
                         +----------------------+     +-------------------------+
                         |                      |     |                         |
                         |  IPFS 저장소        +---->+  TEE 증명 생성           |
                         |  (Pinata)           |     |                         |
                         +----------------------+     +-------------------------+
                                   |                             |
                                   v                             v
                         +----------------------+     +-------------------------+
                         |                      |     |                         |
                         |  NFT 민팅 모듈       +---->+  0G Chain               |
                         |                      |     |                         |
                         +----------------------+     +-------------------------+
```

## 구성 요소 설명

### 1. 사용자 인터페이스
- Next.js 기반의 웹 애플리케이션
- 코드 업로드, 분석 요청, NFT 민팅 등의 기능 제공

### 2. ElizaOS Agent
- Node.js 기반의 백엔드 서버
- 전체 워크플로우 조정 및 관리
- 외부 서비스와의 통합 처리

### 3. 정적 분석 서버
- Python/FastAPI 기반의 분석 서버
- 스마트 계약 코드 취약점 분석
- AI 기반 주석 생성

### 4. AES 암호화 모듈
- AES-256-CBC 알고리즘 사용
- 분석된 코드의 안전한 암호화
- 키 관리 및 메타데이터 생성

### 5. IPFS 저장소
- Pinata IPFS 서비스 사용
- 암호화된 코드 및 메타데이터 저장
- 영구적인 콘텐츠 주소 제공

### 6. TEE 증명 생성
- 신뢰할 수 있는 실행 환경에서 증명 생성
- 코드 분석 결과의 무결성 보장
- 0G Chain과의 통합을 위한 증명 제공

### 7. NFT 민팅 모듈
- ERC-721 표준 기반 NFT 발행
- 0G Chain 및 ThirdWeb 지원
- 코드 소유권 및 분석 결과 기록

## 데이터 흐름

1. 사용자가 코드를 업로드하면 ElizaOS Agent가 이를 정적 분석 서버로 전달
2. 분석 서버가 코드를 분석하고 AI 주석을 생성
3. 분석된 코드는 AES 암호화 모듈을 통해 암호화
4. 암호화된 코드는 IPFS에 업로드되고 TEE 증명 생성
5. NFT 민팅 모듈이 IPFS URI와 TEE 증명을 포함하여 NFT 발행
6. 발행된 NFT 정보가 사용자에게 전달

## 보안 고려사항

- 모든 API 통신은 HTTPS를 통해 암호화
- 환경 변수를 통한 안전한 키 관리
- TEE를 통한 분석 결과의 신뢰성 보장
- AES 암호화를 통한 코드 기밀성 유지
- IPFS를 통한 데이터 영속성 보장 